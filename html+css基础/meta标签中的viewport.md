## viewport的使用说明
移动开发中，我们经常用到meta标签的viewport这一个使用。

```
<meta name="viewport" content="initial-scale=1">
```

在做多设备灵活布局设计的时候，这一个标签的使用非常有用。

通俗的讲，移动设备上的viewport就是设备的屏幕上能用来显示我们的网页的那一块区域，在具体一点，就是浏览器上(也可能是一个app中的webview)用来显示网页的那部分区域。

但viewport又不局限于浏览器可视区域的大小，**它可能比浏览器的可视区域要大，也可能比浏览器的可视区域要小**。在默认情况下，一般来讲，移动设备上的viewport都是要大于浏览器可视区域的，这是因为考虑到移动设备的分辨率相对于桌面电脑来说都比较小，所以为了能在移动设备上正常显示那些传统的为桌面浏览器设计的网站，移动设备上的浏览器都会把自己默认的viewport设为980px或1024px（也可能是其它值，这个是由设备自己决定的），但带来的后果就是浏览器会出现横向滚动条，因为浏览器可视区域的宽度是比这个默认的viewport的宽度要小的。下图列出了一些设备上浏览器的默认viewport的宽度。

![](image/viewport.png)

如图，反正viewport就是指，可视区域的实际大小，如果比你的屏幕大，那就会出现滚动条。

**有一点需要注意的是，css中的px所代表的大小其实是相对大小不是绝对大小。在桌面显示中，1px对应的确实是1个物理像素。然而如果在移动设备中，分辨率和屏幕尺寸不吻合的情况下，css1px所代表的就不是一个屏幕物理像素了。**

### 有关像素的预备知识
像素总体而言其实分为两种，一种是物理像素/设备像素，一种是逻辑像素，比较好区分，前者是只依赖于物理设备的衡量，后者则是在设计时候的一种通用衡量。

#### 设备像素/物理像素
简单来说，就是不同屏幕，都会被划分成一个个点。这个点就是物理像素了。
不同设备一个像素点的绝对长度也是不一样的，要看这个设备的分辨率和屏幕尺寸。比如1028*764的分辨率，则说明这个屏幕一横一竖分别有1028个点和764个点。但是根据屏幕尺寸的大小(屏幕尺寸是绝对的)，每个像素所代表的长度就会不一样。

#### 设备独立像素(DIP)
这个设备独立像素，就是我们在设计或者什么的时候，用的一种逻辑上衡量像素的单位(刚才我称之为**逻辑像素**)，比如我们最熟悉的**css像素**，就是这样一种相对的概念。我们设计出来的css像素对应的物体，并不一定是一一对应于一个设备上的物理像素，这个需要注意了。

因此我们就有了devicePiexelRation这个东西（一个比率），每个设备上这个东西的设定都是不同的。总而言之这就是dpr，公式是**物理像素=独立像素\*dpr**。代表

不同的设备上，dpr都被设置成一个固定值。这样才能保证，在不同的设备上，一个逻辑px的值看上去绝对大小差不多。如果dpr都不管，设置成1的话，那某些屏幕尺寸很小，但是分辨率很大的手机，正常css设计的物件显示在上面就会非常小，试想一想桌面端980px的物体塞到手机屏幕下。

所以dpr必须设置合适来做到一个逻辑像素的大小在不同设备中看到的差不多。

### 传说中分成的三种viewport
有大神(KKP大神)把viewport分为三种，layout viewport,visual viewport,ideal viewport。注意这三种viewport采用的单位都是DIP设备独立像素，所以其指定的像素都是跟你设计时候的像素是一一对应的，但却不会对应设备上的物理像素。显示到屏幕的时候都会自动调整，所以无需担心和物理像素之间的对应关系。

三种viewport都是用逻辑像素来衡量

移动浏览器渲染网页的流程如下

 1. : 渲染————将整个页面渲染在一个layout viewport中，以保证页面排版正确。 
 2. : 缩放————将整个layout viewport缩放到visual viewport大小，以保证页面在手机屏幕上被完整显示出来

#### layout viewport
也就是整个浏览器默认的一张大“画布”，设计好的页面会先渲染到上面。这个layout viewport会默认设置成很大用来保证你的网页可以完整的显示。

#### visual viewport
可视区域的大小，也就是说你屏幕上可以看见的那一块区域能有多大。当我们放大缩小的时候，都是改变visual viewport的值，用来截取真实页面的某一部分显示到屏幕上。

#### ideal viewport
这是一个概念，理想视口。即是当css设置宽度100%的时候，这个视口可以正好铺满屏幕。

所以我们用meta标签，设置viewport，就是设置layout viewport，让他不要这么大，让这个画布变成屏幕的大小来渲染就刚刚好了。

### 一些使用例子
举个例子，如果你的移动版设计是基于320px的宽度，你可以指定viewport的宽度：

``` html
<meta name="viewport" content="width=320">
```

对于流动式布局来说，基于设备不同来设定的viewport宽度更为实用，所以让你的布局宽度和移动设备宽度相符：

``` html
<meta name="viewport" content="width=device-width">
```

还可以设置缩放程度
``` html
<meta name="viewport" content="initial-scale=1">
```
这个保证你的设计在一打开的时候就呈现1:1的比例。不需要设定缩放比例。你可以通过如下方式方式用户改变页面大小：

**总之，如果是做移动开发，想要使得网页适配移动设备的屏幕，只需要加上以下的一句话：**
``` html
<meta name="viewport" content="width=device-width, initial-scale=1">
```

每个移动设备浏览器中都有一个理想的宽度，这个理想的宽度是指css中的宽度，跟设备的物理宽度没有关系，在css中，这个宽度就相当于100%的所代表的那个宽度。我们可以用meta标签把viewport的宽度设为那个理想的宽度，如果不知道这个设备的理想宽度是多少，那么用device-width这个特殊值就行了，同时initial-scale=1也有把viewport的宽度设为理想宽度的作用